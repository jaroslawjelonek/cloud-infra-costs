# Databricks Asset Bundle configuration, more info here: https://docs.databricks.com/en/dev-tools/bundles/settings.html
bundle:
  name: "aws_cost"

include:
  - resources/*.yml
  - resources/*/*.yml

variables:
  catalog:
    description: "Catalog where volume and tables will be configured"
    default: billing
  schema:
    description: "Schema where volume and tables will be configured"
    default: aws
  volume_name:
    description: "Name of volume"
    default: cost_export
  bronze_table_name:
    description: "Name of bronze table"
    default: aws_cost_and_usage_bronze
  silver_table_name:
    description: "Name of silver table"
    default: aws_cost_and_usage_silver
  gold_table_name:
    description: "Name of gold table"  
    default: aws_cost_and_usage_gold
  tracker_table_name:
    description: "Name of tracking table"  
    default: aws_cost_and_usage_tracking
  storage_location:
    description: "Folder within a Storage Account's Container where AWS Cost and Usage Reports (CUR) is exporting files to (ending with '/')"
    default: s3://my-bucket-name/my-prefix/exports/my-report-name/
  warehouse_id:
    description: "Id of SQL warehouse that the dashboard uses"
    default: aws_cost_and_usage_tracking
  job_alerts_email:
    description: "Email to send alerts in case of job failures"
    default: aws_cost_and_usage_tracking

targets:
  # The 'dev' target, for development purposes. This target is the default.
  dev:
    mode: development
    default: true
    run_as:
      # This runs as daniel.martinez@databricks.com in production. We could also use a service principal here,
      # see https://docs.databricks.com/dev-tools/bundles/permissions.html.
      user_name: daniel.martinez@databricks.com
